<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KALA BAZAR | Elite Shop</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --gold: #ff9f43; --dark: #0a0a0a; --green: #00ff88; --card: #111; }
        body { font-family: 'Poppins', sans-serif; margin: 0; background: #000; color: white; -webkit-tap-highlight-color: transparent; }

        header { background: #111; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222; position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 1.4rem; font-weight: bold; color: var(--gold); cursor: pointer; }

        /* SIDEBAR MODERN */
        .sidebar { height: 100%; width: 0; position: fixed; z-index: 5000; top: 0; right: 0; background: #0d0d0d; transition: 0.3s; border-left: 1px solid #333; overflow-y: auto; }
        .menu-list { padding: 10px; }
        .menu-item { display: flex; align-items: center; gap: 15px; padding: 15px; color: white; text-decoration: none; border-bottom: 1px solid #1a1a1a; cursor: pointer; }
        .menu-item i { color: var(--gold); width: 25px; font-size: 1.2rem; }

        /* PRODUCT GRID */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
        .card { background: var(--card); border-radius: 15px; padding: 12px; border: 1px solid #222; display: flex; flex-direction: column; }
        .card img { width: 100%; border-radius: 10px; height: 130px; object-fit: contain; }
        .prod-info { margin-top: 10px; }
        .prod-info h4 { font-size: 0.85rem; margin: 0; color: #eee; height: 35px; overflow: hidden; }
        .prod-desc { font-size: 0.7rem; color: #777; margin: 5px 0; }
        
        .price-row { display: flex; flex-direction: column; margin-top: 5px; }
        .price { color: var(--green); font-weight: bold; font-size: 1.1rem; }
        .watermark { font-size: 8px; color: var(--gold); font-weight: bold; opacity: 0.7; margin-top: 2px; }

        .btn-buy { background: var(--gold); color: black; border: none; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 0.85rem; margin-top: 12px; cursor: pointer; transition: 0.2s; }
        .btn-buy:active { transform: scale(0.95); }

        /* MODAL SYSTEMS */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; display: none; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
        .modal-content { background: #161616; width: 100%; max-width: 400px; padding: 25px; border-radius: 20px; border: 1px solid #333; text-align: center; }
        
        input, textarea { width: 100%; padding: 14px; margin: 10px 0; background: #222; border: 1px solid #444; color: white; border-radius: 10px; box-sizing: border-box; outline: none; }
        .pay-option { display: flex; align-items: center; gap: 15px; background: #222; padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 1px solid #333; cursor: pointer; }
        .pay-option:hover { border-color: var(--gold); }

        /* AI CHATBOX */
        #ai-chat { position: fixed; bottom: 20px; right: 20px; width: 280px; height: 350px; background: white; border-radius: 15px; display: none; flex-direction: column; z-index: 10000; color: black; overflow: hidden; box-shadow: 0 5px 30px rgba(0,0,0,0.5); }
        .chat-head { background: var(--dark); color: var(--gold); padding: 10px; font-weight: bold; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="location.reload()">KALA BAZAR</div>
        <i class="fas fa-bars" onclick="openMenu()" style="font-size:24px; color:white;"></i>
    </header>

    <div id="overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; z-index:4000;" onclick="closeMenu()"></div>

    <div id="sidebar" class="sidebar">
        <div style="padding:20px; border-bottom:1px solid #222; display:flex; justify-content:space-between; align-items:center;">
            <span style="color:var(--gold); font-weight:bold;">KALA BAZAR</span>
            <i class="fas fa-times" onclick="closeMenu()" style="font-size: 20px;"></i>
        </div>
        <div class="menu-list">
            <div class="menu-item" onclick="location.reload()"><i class="fas fa-home"></i> <span>Home Page</span></div>
            <div class="menu-item" onclick="openOrders()"><i class="fas fa-box-open"></i> <span>My Orders</span></div>
            <div class="menu-item" onclick="toggleAI()"><i class="fas fa-robot"></i> <span>AI Assistant</span></div>
            <div class="menu-item" onclick="openPrivacy()"><i class="fas fa-lock"></i> <span>Privacy Policy</span></div>
            <div class="menu-item" onclick="openLogin()"><i class="fas fa-user-circle"></i> <span>User Login / Gmail</span></div>
        </div>
    </div>

    <div class="grid" id="productGrid"></div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h3 style="color:var(--gold)">Login Now</h3>
            <button class="btn-buy" style="background:white; display:flex; align-items:center; justify-content:center; gap:10px; width:100%;" onclick="alert('Redirecting to Google Account...')">
                <img src="https://www.gstatic.com/images/branding/product/1x/googleg_48dp.png" width="18"> Login with Gmail
            </button>
            <div style="margin: 15px 0; color:#555;">OR</div>
            <input type="number" id="phone" placeholder="Phone Number (Full)">
            <input type="password" id="pass" placeholder="Password">
            <button class="btn-buy" style="width:100%;" onclick="doLogin()">PROCEED</button>
            <button onclick="closeModal('loginModal')" style="background:none; border:none; color:red; margin-top:15px;">Close</button>
        </div>
    </div>

    <div id="addrModal" class="modal">
        <div class="modal-content" style="text-align:left;">
            <h3 style="color:var(--gold); text-align:center;">Shipping Address</h3>
            <input type="text" id="cust-name" placeholder="Full Name">
            <input type="text" id="cust-city" placeholder="City & State">
            <textarea id="cust-addr" rows="3" placeholder="Full Address with Pincode"></textarea>
            <button class="btn-buy" style="width:100%;" onclick="openPayment()">NEXT: PAYMENT</button>
            <button onclick="closeModal('addrModal')" style="background:none; border:none; color:red; width:100%; margin-top:10px;">Back</button>
        </div>
    </div>

    <div id="payModal" class="modal">
        <div class="modal-content" style="border: 2px solid var(--gold);">
            <h2 style="color:var(--gold); margin-top:0;">CHOOSE PAYMENT</h2>
            <div id="final-price" style="color:var(--green); font-size:1.5rem; margin-bottom:20px; font-weight:bold;"></div>
            
            <div class="pay-option" onclick="alert('Opening Google Pay...')"><i class="fab fa-google-pay" style="font-size:1.5rem;"></i> Google Pay / PhonePe</div>
            <div class="pay-option" onclick="alert('Opening Paytm...')"><i class="fas fa-wallet"></i> Paytm / UPI</div>
            <div class="pay-option" onclick="alert('BTC Address Copied!')"><i class="fab fa-bitcoin"></i> Crypto (USDT/BTC)</div>
            
            <input type="text" placeholder="Transaction ID (UTR)" style="margin-top:10px; border-color:var(--gold);">
            <button class="btn-buy" style="width:100%; background:var(--green);" onclick="confirmOrder()">CONFIRM ORDER</button>
            <button onclick="closeModal('payModal')" style="background:none; border:none; color:red; width:100%; margin-top:15px;">Cancel</button>
        </div>
    </div>

    <div id="ai-chat">
        <div class="chat-head">KALA AI ü§ñ <span onclick="toggleAI()" style="cursor:pointer;">√ó</span></div>
        <div id="chat-body" style="flex:1; padding:10px; font-size:0.8rem; overflow-y:auto; background:#f9f9f9;">
            <b>AI:</b> ‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?
        </div>
        <div style="display:flex; border-top:1px solid #ddd;">
            <input type="text" id="ai-msg" style="flex:1; border:none; padding:10px; background:white; color:black;" placeholder="Ask me...">
            <button onclick="sendAI()" style="padding:10px; background:var(--gold); border:none;">üöÄ</button>
        </div>
    </div>

    <script>
        let products = [];
        let isLogged = false;
        let selectedPrice = 0;

        fetch('products.json').then(r => r.json()).then(data => {
            products = data;
            const grid = document.getElementById('productGrid');
            grid.innerHTML = data.map((p, i) => `
                <div class="card">
                    <img src="${p.img}" onclick="alert('More Images: Color variants Loading...')">
                    <div class="prod-info">
                        <h4>${p.name}</h4>
                        <p class="prod-desc">${p.desc || 'Premium quality, best in class.'}</p>
                        <div class="price-row">
                            <span class="price">‚Çπ${p.price}</span>
                            <span class="watermark">KALA BAZAR</span>
                        </div>
                    </div>
                    <button class="btn-buy" onclick="buyNow(${i})">BUY NOW</button>
                </div>
            `).join('');
        });

        function buyNow(i) {
            selectedPrice = products[i].price;
            if(!isLogged) { openLogin(); } 
            else { document.getElementById('addrModal').style.display = 'flex'; }
        }

        function openPayment() {
            if(!document.getElementById('cust-name').value) { alert('Fill address first'); return; }
            closeModal('addrModal');
            document.getElementById('final-price').innerText = "Total: ‚Çπ" + selectedPrice;
            document.getElementById('payModal').style.display = 'flex';
        }

        function doLogin() {
            if(document.getElementById('phone').value.length >= 10) {
                isLogged = true;
                closeModal('loginModal');
                alert("Login Success! Now click Buy Now again.");
            }
        }

        function openMenu() { document.getElementById('sidebar').style.width = "280px"; document.getElementById('overlay').style.display = "block"; }
        function closeMenu() { document.getElementById('sidebar').style.width = "0"; document.getElementById('overlay').style.display = "none"; }
        function openLogin() { document.getElementById('loginModal').style.display = 'flex'; closeMenu(); }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        
        function toggleAI() { 
            const chat = document.getElementById('ai-chat');
            chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
            closeMenu();
        }

        function sendAI() {
            const m = document.getElementById('ai-msg');
            if(!m.value) return;
            document.getElementById('chat-body').innerHTML += `<div style="margin-bottom:5px;"><b>You:</b> ${m.value}</div>`;
            setTimeout(() => {
                document.getElementById('chat-body').innerHTML += `<div style="color:blue;"><b>AI:</b> ‡§π‡§Æ ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç!</div>`;
            }, 500);
            m.value = '';
        }

        function openOrders() { if(!isLogged) openLogin(); else alert('No orders yet.'); closeMenu(); }
        function openPrivacy() { alert('Policy: 7 Days Return, Secure Checkout.'); closeMenu(); }
        function confirmOrder() { alert('Order Success! Processing...'); location.reload(); }
    </script>
</body>
  </html>
